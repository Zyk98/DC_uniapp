{"version":3,"sources":["webpack:///D:/源码/小程序源码/新朋友圈/pages/community/index.vue?d2b8","uni-app:///pages/community/index.vue","uni-app:///main.js",null,"webpack:///D:/源码/小程序源码/新朋友圈/pages/community/index.vue?42c0","webpack:///D:/源码/小程序源码/新朋友圈/pages/community/index.vue?35d0"],"names":["createPage","Page"],"mappings":"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","file":"pages/community/index.js","sourcesContent":["import mod from \"-!../../../../../安装包/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../安装包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../安装包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../安装包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../安装包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../安装包/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../安装包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../安装包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../安装包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../安装包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n\t<div name=\"\">\n\t\t<community-card \r\n\t\t\t:info=\"info\"\r\n\t\t\t@tapComment=\"tapComment\"\r\n\t\t\t@clickGood=\"clickGood\"\r\n\t\t\t@clickCollection=\"clickCollection\"\r\n\t\t\t@clickFollow=\"clickFollow\"\r\n\t\t\t@changeMoreSelect=\"changeMoreSelect\"\r\n\t\t></community-card>\r\n\t\t<communityInfo-comment \r\n\t\t\t:info=\"comment\"\r\n\t\t\t@sendComment=\"sendComment\"\r\n\t\t\t@tapGood=\"tapGood\"\r\n\t\t\t@tapGoodTwo=\"tapGoodTwo\"\r\n\t\t></communityInfo-comment>\r\n\t\t<view style=\"width: 100%;height: 10vh;margin-top: 20rpx;\">\r\n\t\t\t<u-loadmore :status=\"status\"/>\r\n\t\t</view>\r\n\t\t<view style=\"width: 100%;height: 10vh;\">\r\n\t\t\t\r\n\t\t</view>\n\t</div>\n</template>\n\n<script>\r\n\timport communityCard from '../../components/community-card/index.vue';\r\n\timport communityInfoComment from '../../components/communityInfo-comment/communityInfo-comment.vue';\r\n\timport {Community} from \"../../model/community\";\r\n\timport {getTime} from \"../../utils/public.js\";\n\texport default{\n\t\tname:\"\",\n\t\tdata(){\n\t\t\treturn {\n\t\t\t\tinfo:\"\",\r\n\t\t\t\tcomment:\"\",\r\n\t\t\t\tpaging:\"\",\r\n\t\t\t\tstatus:\"loading\",\r\n\t\t\t\tId:\"\",\n\t\t\t}\n\t\t},\n\t\tmethods:{\n\t\t\t\n\t\t},\r\n\t\tasync onLoad(e){\r\n\t\t\tvar res = await Community.getCommunityInfo(e.Id);\r\n\t\t\tif(res.data.images){\r\n\t\t\t\tres.data.images=res.data.images.split(',');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(res.code==200) this.info=res.data;\r\n\t\t\tvar paging = await Community.getCommunityComment(e.Id);\r\n\t\t\tvar data = await paging.getMoreData();\r\n\t\t\tthis.comment=data.accoumulator;\r\n\t\t\tthis.paging=paging;\r\n\t\t\tif(!paging.moreData){\r\n\t\t\t\tthis.status=\"nomore\";\r\n\t\t\t}\r\n\t\t\tif(paging.accoumulator.length<20){\r\n\t\t\t\tthis.status=\"nomore\";\r\n\t\t\t}\r\n\t\t\tthis.Id=e.Id;\r\n\t\t},\r\n\t\tasync onReachBottom(){\r\n\t\t\tif(this.paging==\"\")return ;\r\n\t\t\tvar paging = this.paging;\r\n\t\t\tif(paging.moreData){\r\n\t\t\t\tvar data = await paging.getMoreData();\r\n\t\t\t\tthis.comment=this.comment.concat(data.items);\r\n\t\t\t\tthis.status=\"nomore\";\r\n\t\t\t}else{\r\n\t\t\t\tthis.status = 'nomore';\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\tasync onPullDownRefresh(){\r\n\t\t\tvar paging = await Community.getCommunityComment(this.Id);\r\n\t\t\tvar data = await paging.getMoreData();\r\n\t\t\tthis.comment=data.accoumulator;\r\n\t\t\tthis.paging=paging;\r\n\t\t\tif(!paging.moreData){\r\n\t\t\t\tthis.status=\"nomore\";\r\n\t\t\t}\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle:\"刷新完成\",\r\n\t\t\t\ticon:'none'\r\n\t\t\t})\r\n\t\t\tuni.stopPullDownRefresh();\r\n\t\t},\n\t\tmounted(){\n\t\t\t\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t//二级评论点赞\r\n\t\t\tasync tapGoodTwo(e){\r\n\t\t\t\tvar res = await Community.sendCommentTwoGood(e.Id);\r\n\t\t\t\tif(res){\r\n\t\t\t\t\tthis.comment[e.index].twoComment[e.indexTwo].isGood=!e.isGood;\r\n\t\t\t\t\tthis.comment[e.index].twoComment[e.indexTwo].isGood==1?this.comment[e.index].twoComment[e.indexTwo].good+=1:this.comment[e.index].twoComment[e.indexTwo].good-=1;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//评论点赞\r\n\t\t\tasync tapGood(e){\r\n\t\t\t\tvar res = await Community.sendCommentGood(e.Id);\r\n\t\t\t\tif(res){\r\n\t\t\t\t\tthis.comment[e.index].isGood=!e.isGood;\r\n\t\t\t\t\tthis.comment[e.index].isGood==1?this.comment[e.index].good+=1:this.comment[e.index].good-=1;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//评论\r\n\t\t\tasync sendComment(e){\r\n\t\t\t\tconst res = await Community.senComment({'community_id':this.info.Id,'comment_user_id':e.Id,'content':e.content});\r\n\t\t\t\tif(res){\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle:\"评论成功\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tuni.$emit('commentOk',{\r\n\t\t\t\t\t\tcode:true\r\n\t\t\t\t\t});\r\n\t\t\t\t\tconst userInfo=uni.getStorageSync('userInfo');\r\n\t\t\t\t\tlet comment={\r\n\t\t\t\t\t\tId: res.data.Id,\r\n\t\t\t\t\t\tavatar: userInfo.avatar,\r\n\t\t\t\t\t\tcontent: e.content,\r\n\t\t\t\t\t\tcreate_time:getTime(),\r\n\t\t\t\t\t\tgood: 0,\r\n\t\t\t\t\t\tisGood: 0,\r\n\t\t\t\t\t\tnickname: userInfo.nickname,\r\n\t\t\t\t\t\tsign: userInfo.sign,\r\n\t\t\t\t\t\ttwoComment: [],\r\n\t\t\t\t\t\tuser_id: userInfo.Id,\r\n\t\t\t\t\t\tusername: userInfo.username\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(e.Id){\r\n\t\t\t\t\t\tthis.comment[e.index]['twoComment'].unshift(comment);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.comment.unshift(comment);\r\n\t\t\t\t\t\tthis.info.comment+=1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync changeMoreSelect(e){\r\n\t\t\t\tvar res = await Community.sendReport(e.Id);\r\n\t\t\t\tif(res.code==200){\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle:\"举报成功\",\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle:res.msg,\r\n\t\t\t\t\t\ticon:\"none\"\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t//关注\r\n\t\t\tasync clickFollow(e){\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle:\"请求中\"\r\n\t\t\t\t})\r\n\t\t\t\tconst res= await Community.sendFollow(e.Id);\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tthis.info.isFollow=!e.isFollow;\r\n\t\t\t},\r\n\t\t\t//点赞\r\n\t\t\tasync clickGood(e){\r\n\t\t\t\tthis.info.isGood=!e.isGood;\r\n\t\t\t\te.isGood==0?this.info.good+=1:this.info.good-=1;\r\n\t\t\t\tconst res= await Community.sendGood(e.Id);\r\n\t\t\t\tif(res){\r\n\t\t\t\t\t//#ifdef MP-WEIXIN\r\n\t\t\t\t\tuni.vibrateShort({\r\n\t\t\t\t\t\tsuccess: function () {\r\n\t\t\t\t\t\t\tconsole.log('抖动');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t//#endif\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.info.isGood=!this.info.isGood;\r\n\t\t\t\t\te.isGood==0?this.info.good-=1:this.info.good+=1;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//收藏\r\n\t\t\tasync clickCollection(e){\r\n\t\t\t\tthis.info.isCollection=!e.isCollection;\r\n\t\t\t\te.isCollection==0?this.info.collection+=1:this.info.collection-=1;\r\n\t\t\t\tconst res= await Community.sendCollection(e.Id);\r\n\t\t\t\tif(res){\r\n\t\t\t\t\t//#ifdef APP-PLUS||MP-WEIXIN\r\n\t\t\t\t\tuni.vibrateShort({\r\n\t\t\t\t\t\tsuccess: function () {\r\n\t\t\t\t\t\t\tconsole.log('抖动');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t//#endif\r\n\t\t\t\t}else{\r\n\t\t\t\t\te.isCollection==0?this.info.collection-=1:this.info.collection+=1;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tcommunityCard,\r\n\t\t\tcommunityInfoComment\r\n\t\t},\r\n\t\t\n\t}\n</script>\n\n<style lang=\"scss\" scoped>\n\t\n</style>\n","import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/community/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=5fb47dc3&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../安装包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5fb47dc3\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/community/index.vue\"\nexport default component.exports","export * from \"-!../../../../../安装包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../安装包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../安装包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../安装包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../安装包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../安装包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=5fb47dc3&scoped=true&\"","var components = {\n  communityInfoComment: function() {\n    return import(\n      /* webpackChunkName: \"components/communityInfo-comment/communityInfo-comment\" */ \"@/components/communityInfo-comment/communityInfo-comment.vue\"\n    )\n  },\n  uLoadmore: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-loadmore/u-loadmore\" */ \"@/uview-ui/components/u-loadmore/u-loadmore.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }"],"sourceRoot":""}